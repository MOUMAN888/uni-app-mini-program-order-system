<view class="wrap"><block wx:if="{{subCurrent==1}}"><view><view class="address"><view><view class="u-font-weight">北京市朝阳区万豪公馆7号楼1单元1201</view><view class="u-font-24 u-type-info u-m-t-15"><text class="u-m-r-10">Kaiyuan_Q</text><text>188****8888</text></view></view><view><u-icon vue-id="3edbb4c8-1" name="arrow-right" color="#909399" bind:__l="__l"></u-icon></view></view><u-gap vue-id="3edbb4c8-2" height="20" bg-color="#f3f4f6" bind:__l="__l"></u-gap></view></block><view class="u-flex u-row-between u-m-t-30 u-m-b-30 u-m-l-30 u-m-r-30"><view class="u-font-24 u-font-weight u-content-color">{{''+shopName+''}}</view><view><u-tag vue-id="3edbb4c8-3" text="{{subCurrent==1?'外卖':'堂食'}}" mode="dark" bg-color="#EE2F37" size="mini" bind:__l="__l"></u-tag></view></view><block wx:for="{{orderList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="u-flex list-box"><view><image class="item-menu-image" src="{{item.icon}}" mode="aspectFill"></image></view><view class="item-menu-name"><text class="u-font-26">{{item.name}}</text><view class="u-line-2 u-font-20 u-type-info u-m-t-10 u-m-b-10">{{''+item.desc+''}}</view><view class="u-flex u-row-between"><view class="u-font-weight u-font-24" style="color:#EE2F37;"><text class="u-font-20">￥</text>{{''+item.price+''}}</view><view class="u-type-info u-font-22">{{'x'+item.value+''}}</view></view></view></view></block><view class="u-cell-box"><u-cell-group vue-id="3edbb4c8-4" border="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{subCurrent==0}}"><u-cell-item vue-id="{{('3edbb4c8-5')+','+('3edbb4c8-4')}}" title="联系电话" title-style="{{titleStyle}}" border-bottom="{{false}}" arrow="{{false}}" clickable="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" style="width:100%;border:none;" vue-id="{{('3edbb4c8-6')+','+('3edbb4c8-5')}}" placeholder="请输入手机号" type="number" maxlength="11" input-align="right" value="{{form.phone}}" data-event-opts="{{[['^input',[['__set_model',['$0','phone','$event',[]],['form']]]]]}}" bind:__l="__l"></u-input></u-cell-item></block><block wx:else><u-cell-item vue-id="{{('3edbb4c8-7')+','+('3edbb4c8-4')}}" title="配送时间" value="{{form.mealsTime?form.mealsTime:'请选择'}}" title-style="{{titleStyle}}" value-style="{{valueStyle}}" hover-class="none" border-bottom="{{false}}" data-event-opts="{{[['^click',[['e0']]]]}}" bind:click="__e" bind:__l="__l"></u-cell-item></block><u-cell-item vue-id="{{('3edbb4c8-8')+','+('3edbb4c8-4')}}" title="备注" border-bottom="{{false}}" title-style="{{titleStyle}}" value="{{form.note?$root.g0>10?$root.g1+'...':form.note:'无'}}" value-style="{{valueStyle}}" hover-class="none" data-event-opts="{{[['^click',[['PopupModal',[1]]]]]}}" bind:click="__e" bind:__l="__l"></u-cell-item><u-cell-item vue-id="{{('3edbb4c8-9')+','+('3edbb4c8-4')}}" title="优惠券" border-bottom="{{false}}" title-style="{{titleStyle}}" value="{{selectedCoupon?selectedCoupon.couponName+'（-￥'+selectedCoupon.discountAmount+'）':'选择优惠券'}}" value-style="{{valueStyle}}" hover-class="none" data-event-opts="{{[['^click',[['e1']]]]}}" bind:click="__e" bind:__l="__l"></u-cell-item></u-cell-group></view><u-gap vue-id="3edbb4c8-10" height="100" bind:__l="__l"></u-gap><view class="u-bottom"><view class="u-bottom__wrap"><view class="u-font-weight u-font-40 u-m-l-20"><text class="u-font-24">￥</text>{{''+$root.g2+''}}<block wx:if="{{selectedCoupon}}"><text class="u-font-20" style="text-decoration:line-through;color:#909399;margin-left:10rpx;">{{'￥'+$root.g3+''}}</text></block></view><view class="u-bottom__nums">{{"共 "+orderNum+" 件商品"}}</view></view><view data-event-opts="{{[['tap',[['confirmPay',['$event']]]]]}}" class="u-bottom__place" bindtap="__e"> 确认支付 </view></view><u-popup bind:input="__e" vue-id="3edbb4c8-11" mode="bottom" height="80%" border-radius="14" closeable="{{true}}" mask-close-able="{{false}}" value="{{PopupShow}}" data-event-opts="{{[['^input',[['__set_model',['','PopupShow','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{!PopupPage}}"><view><view class="u-m-l-30 u-m-r-30 u-m-t-30"><view><u-image vue-id="{{('3edbb4c8-12')+','+('3edbb4c8-11')}}" src="/static/menu/index-dining.png" width="220" height="180" bind:__l="__l"></u-image></view><view class="u-font-34 u-font-weight u-m-t-50 u-m-b-50">请选择用餐人数</view><u-grid vue-id="{{('3edbb4c8-13')+','+('3edbb4c8-11')}}" col="{{4}}" border="{{false}}" hover-class="none" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{12}}" wx:for-item="item" wx:for-index="__i0__" wx:key="*this"><u-grid-item vue-id="{{('3edbb4c8-14-'+__i0__)+','+('3edbb4c8-13')}}" custom-style="{{customStyle}}" data-event-opts="{{[['^click',[['SelectPeople',['$0'],[[[12,'',__i0__]]]]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="u-font-weight">{{''+(item+1)+''}}</view></u-grid-item></block></u-grid><u-gap vue-id="{{('3edbb4c8-15')+','+('3edbb4c8-11')}}" height="30" bind:__l="__l"></u-gap></view></view></block><block wx:else><view><view class="u-m-l-30 u-m-r-30 u-m-t-30"><view><u-image vue-id="{{('3edbb4c8-16')+','+('3edbb4c8-11')}}" src="/static/menu/index-leave.jpg" width="220" height="180" bind:__l="__l"></u-image></view><view class="u-font-34 u-font-weight u-m-t-50 u-m-b-50">快捷标签</view><u-grid vue-id="{{('3edbb4c8-17')+','+('3edbb4c8-11')}}" col="{{4}}" border="{{false}}" hover-class="none" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{tags}}" wx:for-item="item" wx:for-index="__i1__" wx:key="*this"><u-grid-item vue-id="{{('3edbb4c8-18-'+__i1__)+','+('3edbb4c8-17')}}" custom-style="{{customStyle}}" data-event-opts="{{[['^click',[['SelectTags',['$0'],[[['tags','',__i1__]]]]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="u-font-weight">{{item}}</view></u-grid-item></block></u-grid><view class="u-font-34 u-font-weight u-m-t-50 u-m-b-50">自定义留言</view><u-input bind:input="__e" vue-id="{{('3edbb4c8-19')+','+('3edbb4c8-11')}}" type="textarea" placeholder="请填写您的需求" placeholder-style="color: #909399" custom-style="{{inputStyle}}" value="{{form.note}}" data-event-opts="{{[['^input',[['__set_model',['$0','note','$event',[]],['form']]]]]}}" bind:__l="__l"></u-input><u-gap vue-id="{{('3edbb4c8-20')+','+('3edbb4c8-11')}}" height="30" bind:__l="__l"></u-gap></view></view></block></u-popup><u-picker vue-id="3edbb4c8-21" mode="time" params="{{TimerParams}}" value="{{TimerShow}}" data-event-opts="{{[['^confirm',[['mealsPicker']]],['^input',[['__set_model',['','TimerShow','$event',[]]]]]]}}" bind:confirm="__e" bind:input="__e" bind:__l="__l"></u-picker><u-popup bind:input="__e" vue-id="3edbb4c8-22" mode="bottom" height="70%" border-radius="20" mask-close-able="{{true}}" value="{{couponSelectorShow}}" data-event-opts="{{[['^input',[['__set_model',['','couponSelectorShow','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="coupon-selector"><view class="coupon-selector__header"><view class="coupon-selector__title">选择优惠券</view><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="coupon-selector__close" bindtap="__e"><u-icon vue-id="{{('3edbb4c8-23')+','+('3edbb4c8-22')}}" name="close" size="24" bind:__l="__l"></u-icon></view></view><scroll-view class="coupon-selector__list" scroll-y="{{true}}"><view data-event-opts="{{[['tap',[['selectCoupon',[null]]]]]}}" class="{{['coupon-selector__item','coupon-selector__item--none',(!selectedCoupon)?'coupon-selector__item--selected':'']}}" bindtap="__e"><text>不使用优惠券</text></view><block wx:for="{{$root.l0}}" wx:for-item="coupon" wx:for-index="__i2__" wx:key="id"><view data-event-opts="{{[['tap',[['selectCoupon',['$0'],[[['userCoupons','id',coupon.$orig.id]]]]]]]}}" class="{{['coupon-selector__item',(!coupon.m0)?'coupon-selector__item--disabled':'',(selectedCoupon&&selectedCoupon.id===coupon.$orig.id)?'coupon-selector__item--selected':'']}}" bindtap="__e"><view class="coupon-selector__item-left"><text class="coupon-selector__item-amount">{{"￥"+coupon.$orig.discountAmount}}</text></view><view class="coupon-selector__item-right"><view class="coupon-selector__item-name">{{coupon.$orig.couponName}}</view><block wx:if="{{coupon.$orig.minOrderAmount}}"><view class="coupon-selector__item-desc">{{'满￥'+coupon.$orig.minOrderAmount+'可用'}}</view></block><block wx:else><view class="coupon-selector__item-desc"> 无门槛 </view></block><block wx:if="{{!coupon.m1}}"><view class="coupon-selector__item-tip"> 订单金额不足 </view></block></view><block wx:if="{{selectedCoupon&&selectedCoupon.id===coupon.$orig.id}}"><view class="coupon-selector__item-check"><u-icon vue-id="{{('3edbb4c8-24-'+__i2__)+','+('3edbb4c8-22')}}" name="checkmark" color="#EE2F37" size="24" bind:__l="__l"></u-icon></view></block></view></block><block wx:if="{{$root.g4===0}}"><view class="coupon-selector__empty"> 暂无可用优惠券 </view></block></scroll-view></view></u-popup><u-popup bind:input="__e" vue-id="3edbb4c8-25" mode="bottom" border-radius="24" mask-close-able="{{false}}" value="{{payPopupShow}}" data-event-opts="{{[['^input',[['__set_model',['','payPopupShow','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="pay-popup"><block wx:if="{{payProcessing}}"><view class="pay-popup__loading"><view class="pay-popup__loading-content"><view class="pay-popup__spinner"></view><text class="pay-popup__loading-text">支付中...</text></view></view></block><view class="pay-popup__title">微信支付</view><view class="pay-popup__amount"><text class="symbol">￥</text><text class="value">{{$root.g5}}</text><block wx:if="{{selectedCoupon}}"><text class="pay-popup__discount">{{'已优惠￥'+$root.g6+''}}</text></block></view><view class="pay-popup__desc"> 请输入支付密码完成本次支付 </view><view class="pay-popup__password"><u-input bind:input="__e" vue-id="{{('3edbb4c8-26')+','+('3edbb4c8-25')}}" type="password" maxlength="6" placeholder="请输入6位支付密码" border="{{true}}" input-align="center" disabled="{{payProcessing}}" value="{{payPassword}}" data-event-opts="{{[['^input',[['__set_model',['','payPassword','$event',[]]]]]]}}" bind:__l="__l"></u-input></view><block wx:if="{{payError}}"><view class="pay-popup__error">{{''+payError+''}}</view></block><view class="pay-popup__actions"><u-button vue-id="{{('3edbb4c8-27')+','+('3edbb4c8-25')}}" plain="{{true}}" type="default" size="medium" disabled="{{payProcessing}}" data-event-opts="{{[['^click',[['e3']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"> 取消 </u-button><u-button vue-id="{{('3edbb4c8-28')+','+('3edbb4c8-25')}}" type="primary" size="medium" custom-style="{{({background:'#07c160',borderColor:'#07c160'})}}" loading="{{payProcessing}}" disabled="{{payProcessing}}" data-event-opts="{{[['^click',[['handlePayConfirm']]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default']}}"> 立即支付 </u-button></view></view></u-popup></view>
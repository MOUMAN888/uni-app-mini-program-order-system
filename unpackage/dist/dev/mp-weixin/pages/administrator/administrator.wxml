<view class="admin-page data-v-01e4c3a2"><view class="admin-header data-v-01e4c3a2"><view class="admin-header__title data-v-01e4c3a2">管理员设置</view><view class="admin-header__subtitle data-v-01e4c3a2">管理管理员和用户权限</view></view><view class="admin-tabs data-v-01e4c3a2"><view data-event-opts="{{[['tap',[['switchTab',['admin']]]]]}}" class="{{['admin-tabs__item','data-v-01e4c3a2',(activeTab==='admin')?'admin-tabs__item--active':'']}}" bindtap="__e"> 管理员列表 </view><view data-event-opts="{{[['tap',[['switchTab',['user']]]]]}}" class="{{['admin-tabs__item','data-v-01e4c3a2',(activeTab==='user')?'admin-tabs__item--active':'']}}" bindtap="__e"> 用户列表 </view></view><block wx:if="{{activeTab==='user'}}"><view class="admin-search data-v-01e4c3a2"><u-input vue-id="3ab431a4-1" placeholder="搜索姓名、手机号、邮箱、用户名" border="{{false}}" custom-style="{{({background:'#f5f5f5',borderRadius:'20rpx',padding:'20rpx'})}}" value="{{searchKeyword}}" data-event-opts="{{[['^confirm',[['handleSearch']]],['^input',[['__set_model',['','searchKeyword','$event',[]]]]]]}}" bind:confirm="__e" bind:input="__e" class="data-v-01e4c3a2" bind:__l="__l" vue-slots="{{['suffix']}}"><view slot="suffix" class="data-v-01e4c3a2"><view data-event-opts="{{[['tap',[['handleSearch',['$event']]]]]}}" class="admin-search__icon data-v-01e4c3a2" bindtap="__e"><u-icon vue-id="{{('3ab431a4-2')+','+('3ab431a4-1')}}" name="search" size="20" color="#909399" class="data-v-01e4c3a2" bind:__l="__l"></u-icon></view></view></u-input></view></block><block wx:if="{{activeTab==='admin'}}"><view class="admin-content data-v-01e4c3a2"><block wx:if="{{$root.g0}}"><view class="admin-list data-v-01e4c3a2"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="admin-card data-v-01e4c3a2"><view class="admin-card__left data-v-01e4c3a2"><view class="admin-card__avatar data-v-01e4c3a2"><text class="admin-card__avatar-text data-v-01e4c3a2">{{item.$orig.name?item.g1:'A'}}</text></view><view class="admin-card__info data-v-01e4c3a2"><view class="admin-card__name data-v-01e4c3a2">{{item.$orig.name||'管理员'}}</view><view class="admin-card__type data-v-01e4c3a2"><u-tag vue-id="{{'3ab431a4-3-'+index}}" text="{{item.$orig.authority==='super_admin'?'超级管理员':'普通管理员'}}" type="{{item.$orig.authority==='super_admin'?'error':'warning'}}" size="mini" class="data-v-01e4c3a2" bind:__l="__l"></u-tag></view></view></view></view></block></view></block><block wx:else><u-empty vue-id="3ab431a4-4" text="暂无管理员" mode="list" class="data-v-01e4c3a2" bind:__l="__l"></u-empty></block><block wx:if="{{adminTotalPages>1}}"><view class="admin-pagination data-v-01e4c3a2"><u-button vue-id="3ab431a4-5" type="info" size="mini" disabled="{{adminPage===1}}" data-event-opts="{{[['^click',[['prevAdminPage']]]]}}" bind:click="__e" class="data-v-01e4c3a2" bind:__l="__l" vue-slots="{{['default']}}">上一页</u-button><text class="admin-pagination__text data-v-01e4c3a2">{{adminPage+" / "+adminTotalPages}}</text><u-button vue-id="3ab431a4-6" type="info" size="mini" disabled="{{adminPage===adminTotalPages}}" data-event-opts="{{[['^click',[['nextAdminPage']]]]}}" bind:click="__e" class="data-v-01e4c3a2" bind:__l="__l" vue-slots="{{['default']}}">下一页</u-button></view></block></view></block><block wx:if="{{activeTab==='user'}}"><view class="admin-content data-v-01e4c3a2"><block wx:if="{{$root.g2}}"><view class="admin-list data-v-01e4c3a2"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="admin-card data-v-01e4c3a2"><view class="admin-card__left data-v-01e4c3a2"><view class="admin-card__avatar data-v-01e4c3a2"><text class="admin-card__avatar-text data-v-01e4c3a2">{{item.$orig.realname?item.g3:item.$orig.name?item.g4:'U'}}</text></view><view class="admin-card__info data-v-01e4c3a2"><view class="admin-card__name data-v-01e4c3a2">{{item.$orig.realname||item.$orig.name||'用户'}}</view><view class="admin-card__meta data-v-01e4c3a2"><block wx:if="{{item.$orig.phone}}"><text class="admin-card__meta-item data-v-01e4c3a2">{{"手机："+item.$orig.phone}}</text></block></view><view class="admin-card__type data-v-01e4c3a2"><u-tag vue-id="{{'3ab431a4-7-'+index}}" text="{{item.m0}}" type="{{item.m1}}" size="mini" class="data-v-01e4c3a2" bind:__l="__l"></u-tag><block wx:if="{{item.$orig.totalPoints!==undefined}}"><text class="admin-card__points data-v-01e4c3a2">{{"积分："+item.$orig.totalPoints}}</text></block></view></view></view><view class="admin-card__right data-v-01e4c3a2"><block wx:if="{{item.$orig.type===1}}"><u-button vue-id="{{'3ab431a4-8-'+index}}" type="primary" size="mini" data-event-opts="{{[['^click',[['handleSetAdmin',['$0'],[[['userList','id',item.$orig.id]]]]]]]}}" bind:click="__e" class="data-v-01e4c3a2" bind:__l="__l" vue-slots="{{['default']}}">设为管理员</u-button></block><block wx:else><block wx:if="{{item.$orig.type===2}}"><u-button vue-id="{{'3ab431a4-9-'+index}}" type="error" size="mini" data-event-opts="{{[['^click',[['handleRemoveAdmin',['$0'],[[['userList','id',item.$orig.id]]]]]]]}}" bind:click="__e" class="data-v-01e4c3a2" bind:__l="__l" vue-slots="{{['default']}}">删除管理员</u-button></block><block wx:else><block wx:if="{{item.$orig.type===3}}"><text class="admin-card__super-tip data-v-01e4c3a2">超级管理员</text></block></block></block></view></view></block></view></block><block wx:else><u-empty vue-id="3ab431a4-10" text="暂无用户" mode="list" class="data-v-01e4c3a2" bind:__l="__l"></u-empty></block><block wx:if="{{userTotalPages>1}}"><view class="admin-pagination data-v-01e4c3a2"><u-button vue-id="3ab431a4-11" type="info" size="mini" disabled="{{userPage===1}}" data-event-opts="{{[['^click',[['prevUserPage']]]]}}" bind:click="__e" class="data-v-01e4c3a2" bind:__l="__l" vue-slots="{{['default']}}">上一页</u-button><text class="admin-pagination__text data-v-01e4c3a2">{{userPage+" / "+userTotalPages}}</text><u-button vue-id="3ab431a4-12" type="info" size="mini" disabled="{{userPage===userTotalPages}}" data-event-opts="{{[['^click',[['nextUserPage']]]]}}" bind:click="__e" class="data-v-01e4c3a2" bind:__l="__l" vue-slots="{{['default']}}">下一页</u-button></view></block></view></block></view>
<view class="u-wrap data-v-368aef34"><view class="header data-v-368aef34"><view class="data-v-368aef34"><view class="header__title data-v-368aef34">{{shopName}}</view></view><view class="data-v-368aef34"><u-subsection vue-id="9ad1f540-1" list="{{subList}}" current="{{subCurrent}}" active-color="#EE2F37" mode="subsection" height="50" bold="{{false}}" data-event-opts="{{[['^change',[['subChange']]]]}}" bind:change="__e" class="data-v-368aef34" bind:__l="__l"></u-subsection></view></view><view class="u-menu-wrap data-v-368aef34"><scroll-view class="u-tab-view menu-scroll-view data-v-368aef34" scroll-y="{{true}}" scroll-with-animation="{{true}}" scroll-top="{{scrollTop}}" show-scrollbar="{{false}}" enhanced="{{true}}"><block wx:for="{{tabbar}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['u-tab-item','data-v-368aef34',current==index?'u-tab-item-active':'']}}" data-current="{{index}}"><view data-event-opts="{{[['tap',[['swichMenu',[index]]]]]}}" class="u-tab-item__content data-v-368aef34" catchtap="__e"><text class="tabMenu-name data-v-368aef34">{{item.name}}</text></view><block wx:if="{{isAdmin}}"><view data-event-opts="{{[['tap',[['showCategoryActionSheet',['$0'],[[['tabbar','',index]]]]]]]}}" class="category-more-btn data-v-368aef34" catchtap="__e"><u-icon vue-id="{{'9ad1f540-2-'+index}}" name="more-dot-fill" size="20" color="#909399" class="data-v-368aef34" bind:__l="__l"></u-icon></view></block></view></block><block wx:if="{{isAdmin}}"><view data-event-opts="{{[['tap',[['showAddCategoryPopup',['$event']]]]]}}" class="add-category-btn data-v-368aef34" catchtap="__e"><u-icon vue-id="9ad1f540-3" name="plus" size="24" color="#fff" class="data-v-368aef34" bind:__l="__l"></u-icon><text class="add-category-btn__text data-v-368aef34">添加分类</text></view></block><u-gap vue-id="9ad1f540-4" height="300" bg-color="#FFFFFF" class="data-v-368aef34" bind:__l="__l"></u-gap></scroll-view><block wx:for="{{tabbar}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block class="data-v-368aef34"><block wx:if="{{current==index}}"><scroll-view class="right-box data-v-368aef34" scroll-y="{{true}}" show-scrollbar="{{false}}" enhanced="{{true}}"><view class="right-box__swiper data-v-368aef34"><u-swiper vue-id="{{'9ad1f540-5-'+index}}" list="{{bannerList}}" height="{{180}}" class="data-v-368aef34" bind:__l="__l"></u-swiper></view><view class="page-view data-v-368aef34"><view class="item-title data-v-368aef34"><text class="data-v-368aef34">{{item.name}}</text><block wx:if="{{isAdmin}}"><view data-event-opts="{{[['tap',[['showAddProductPopup',['$0'],[[['tabbar','',index]]]]]]]}}" class="add-product-btn data-v-368aef34" bindtap="__e"><u-icon vue-id="{{'9ad1f540-6-'+index}}" name="plus" size="20" color="#EE2F37" class="data-v-368aef34" bind:__l="__l"></u-icon><text class="data-v-368aef34">添加商品</text></view></block></view><view class="class-item data-v-368aef34"><block wx:for="{{item.foods}}" wx:for-item="item1" wx:for-index="index1" wx:key="index1"><view class="class-item-box data-v-368aef34"><block wx:if="{{isAdmin}}"><view class="product-admin-actions data-v-368aef34"><view data-event-opts="{{[['tap',[['showEditProductPopup',['$0','$1'],[[['tabbar','',index],['foods','',index1]],[['tabbar','',index]]]]]]]}}" class="product-admin-btn data-v-368aef34" catchtap="__e"><u-icon vue-id="{{'9ad1f540-7-'+index+'-'+index1}}" name="edit-pen" size="18" color="#fff" class="data-v-368aef34" bind:__l="__l"></u-icon></view><view data-event-opts="{{[['tap',[['handleDeleteProduct',['$0'],[[['tabbar','',index],['foods','',index1]]]]]]]}}" class="product-admin-btn product-admin-btn--delete data-v-368aef34" catchtap="__e"><u-icon vue-id="{{'9ad1f540-8-'+index+'-'+index1}}" name="trash" size="18" color="#fff" class="data-v-368aef34" bind:__l="__l"></u-icon></view></view></block><image class="item-menu-image data-v-368aef34" src="{{item1.icon}}" mode="aspectFill"></image><view class="item-menu-name data-v-368aef34"><text class="item-menu-name__name data-v-368aef34">{{item1.name}}</text><view class="item-menu-name__desc u-line-2 data-v-368aef34">{{''+item1.desc+''}}</view><view class="item-menu-price data-v-368aef34"><view class="item-menu-price__color data-v-368aef34"><text class="item-menu-price__text data-v-368aef34">￥</text>{{''+item1.price+''}}</view><view class="data-v-368aef34"><u-number-box vue-id="{{'9ad1f540-9-'+index+'-'+index1}}" min="{{0}}" max="{{100}}" disabled-input="{{true}}" long-press="{{false}}" color="#fff" value="{{item1.value}}" data-event-opts="{{[['^plus',[['plusMenu',['$0'],[[['tabbar','',index],['foods','',index1]]]]]],['^minus',[['minusMenu',['$0'],[[['tabbar','',index],['foods','',index1]]]]]],['^input',[['__set_model',['$0','value','$event',[]],[[['tabbar','',index],['foods','',index1]]]]]]]}}" bind:plus="__e" bind:minus="__e" bind:input="__e" class="data-v-368aef34" bind:__l="__l"></u-number-box></view></view></view></view></block></view></view><u-gap vue-id="{{'9ad1f540-10-'+index}}" height="200" bg-color="#FAFAFA" class="data-v-368aef34" bind:__l="__l"></u-gap></scroll-view></block></block></block></view><view class="u-bottom data-v-368aef34"><view data-event-opts="{{[['tap',[['MenuPopup',['$event']]]]]}}" class="u-bottom__wrap data-v-368aef34" bindtap="__e"><view class="u-bottom__bags data-v-368aef34"><u-badge vue-id="9ad1f540-11" count="{{menuNum}}" type="error" offset="{{[-5,-10]}}" class="data-v-368aef34" bind:__l="__l"></u-badge><u-icon vue-id="9ad1f540-12" name="/static/menu/bags.png" size="50" class="data-v-368aef34" bind:__l="__l"></u-icon></view><view class="u-bottom__price data-v-368aef34"><text class="data-v-368aef34">￥</text>{{''+($root.g0===0?'0.00':$root.g1)+''}}<block wx:if="{{discountAmount>0}}"><text class="u-bottom__discount data-v-368aef34">{{"已优惠￥"+$root.g2}}</text></block></view><view class="u-bottom__nums data-v-368aef34">{{"共 "+menuNum+" 件"}}</view></view><view data-event-opts="{{[['tap',[['settlement',['$event']]]]]}}" class="u-bottom__place data-v-368aef34" bindtap="__e"> 去结算 </view></view><u-popup bind:input="__e" vue-id="9ad1f540-13" mode="bottom" height="70%" border-radius="14" value="{{PopupShow}}" data-event-opts="{{[['^input',[['__set_model',['','PopupShow','$event',[]]]]]]}}" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-wrap data-v-368aef34"><view data-event-opts="{{[['tap',[['clickEmptyShop',['$event']]]]]}}" class="emptyShop data-v-368aef34" bindtap="__e"><u-icon class="emptyShop__icon data-v-368aef34" vue-id="{{('9ad1f540-14')+','+('9ad1f540-13')}}" name="trash" bind:__l="__l"></u-icon>清空购物车 </view><u-gap vue-id="{{('9ad1f540-15')+','+('9ad1f540-13')}}" height="80" class="data-v-368aef34" bind:__l="__l"></u-gap><block wx:for="{{SelectMenu}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="menulist data-v-368aef34"><image class="item-menu-images data-v-368aef34" src="{{item.icon}}" mode="aspectFill"></image><view class="item-menu-name data-v-368aef34"><text class="item-menu-name__name data-v-368aef34">{{item.name}}</text><view class="item-menu-name__desc data-v-368aef34">{{''+item.desc+''}}</view><view class="item-menu-price data-v-368aef34"><view class="item-menu-price__color data-v-368aef34"><text class="item-menu-price__text data-v-368aef34">￥</text>{{''+item.price+''}}</view><view class="data-v-368aef34"><u-number-box vue-id="{{('9ad1f540-16-'+index)+','+('9ad1f540-13')}}" min="{{0}}" max="{{100}}" disabled-input="{{true}}" long-press="{{false}}" color="#fff" value="{{item.value}}" data-event-opts="{{[['^plus',[['plusMenu',['$0'],[[['SelectMenu','',index]]]]]],['^minus',[['minusMenu',['$0'],[[['SelectMenu','',index]]]]]],['^input',[['__set_model',['$0','value','$event',[]],[[['SelectMenu','',index]]]]]]]}}" bind:plus="__e" bind:minus="__e" bind:input="__e" class="data-v-368aef34" bind:__l="__l"></u-number-box></view></view></view></view></block></view></u-popup><u-popup bind:input="__e" vue-id="9ad1f540-17" mode="center" width="80%" border-radius="20" value="{{showCategoryPopup}}" data-event-opts="{{[['^input',[['__set_model',['','showCategoryPopup','$event',[]]]]]]}}" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><view class="admin-popup data-v-368aef34"><view class="admin-popup__title data-v-368aef34">{{editingCategory?'编辑分类':'添加分类'}}</view><u-form vue-id="{{('9ad1f540-18')+','+('9ad1f540-17')}}" model="{{categoryForm}}" label-width="120" data-ref="categoryForm" class="data-v-368aef34 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('9ad1f540-19')+','+('9ad1f540-18')}}" label="分类名称" prop="name" required="{{true}}" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('9ad1f540-20')+','+('9ad1f540-19')}}" placeholder="请输入分类名称" border="{{false}}" custom-style="{{({background:'#f5f5f5',borderRadius:'10rpx',padding:'20rpx'})}}" value="{{categoryForm.name}}" data-event-opts="{{[['^input',[['__set_model',['$0','name','$event',[]],['categoryForm']]]]]}}" class="data-v-368aef34" bind:__l="__l"></u-input></u-form-item></u-form><view class="admin-popup__actions data-v-368aef34"><u-button vue-id="{{('9ad1f540-21')+','+('9ad1f540-17')}}" type="info" size="default" data-event-opts="{{[['^click',[['e0']]]]}}" bind:click="__e" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}">取消</u-button><u-button vue-id="{{('9ad1f540-22')+','+('9ad1f540-17')}}" type="primary" size="default" data-event-opts="{{[['^click',[['handleSaveCategory']]]]}}" bind:click="__e" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}">确定</u-button></view></view></u-popup><u-popup bind:input="__e" vue-id="9ad1f540-23" mode="center" width="85%" border-radius="20" value="{{showProductPopup}}" data-event-opts="{{[['^input',[['__set_model',['','showProductPopup','$event',[]]]]]]}}" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><view class="admin-popup data-v-368aef34"><view class="admin-popup__title data-v-368aef34">{{editingProduct?'编辑商品':'添加商品'}}</view><u-form vue-id="{{('9ad1f540-24')+','+('9ad1f540-23')}}" model="{{productForm}}" label-width="120" data-ref="productForm" class="data-v-368aef34 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><u-form-item vue-id="{{('9ad1f540-25')+','+('9ad1f540-24')}}" label="商品名称" prop="name" required="{{true}}" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('9ad1f540-26')+','+('9ad1f540-25')}}" placeholder="请输入商品名称" border="{{false}}" custom-style="{{({background:'#f5f5f5',borderRadius:'10rpx',padding:'20rpx'})}}" value="{{productForm.name}}" data-event-opts="{{[['^input',[['__set_model',['$0','name','$event',[]],['productForm']]]]]}}" class="data-v-368aef34" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('9ad1f540-27')+','+('9ad1f540-24')}}" label="分类" prop="typeid" required="{{true}}" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><view data-event-opts="{{[['tap',[['handleOpenCategoryPicker',['$event']]]]]}}" class="category-selector data-v-368aef34" catchtap="__e"><view class="category-selector__input data-v-368aef34"><text class="category-selector__text data-v-368aef34">{{productForm.typeName||'请选择分类'}}</text></view><u-icon class="category-selector__icon data-v-368aef34" vue-id="{{('9ad1f540-28')+','+('9ad1f540-27')}}" name="arrow-down" size="20" color="#909399" bind:__l="__l"></u-icon></view></u-form-item><u-form-item vue-id="{{('9ad1f540-29')+','+('9ad1f540-24')}}" label="价格" prop="price" required="{{true}}" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('9ad1f540-30')+','+('9ad1f540-29')}}" type="digit" placeholder="请输入价格" border="{{false}}" custom-style="{{({background:'#f5f5f5',borderRadius:'10rpx',padding:'20rpx'})}}" value="{{productForm.price}}" data-event-opts="{{[['^input',[['__set_model',['$0','price','$event',[]],['productForm']]]]]}}" class="data-v-368aef34" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('9ad1f540-31')+','+('9ad1f540-24')}}" label="会员价" prop="price1" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('9ad1f540-32')+','+('9ad1f540-31')}}" type="digit" placeholder="可选，请输入会员价" border="{{false}}" custom-style="{{({background:'#f5f5f5',borderRadius:'10rpx',padding:'20rpx'})}}" value="{{productForm.price1}}" data-event-opts="{{[['^input',[['__set_model',['$0','price1','$event',[]],['productForm']]]]]}}" class="data-v-368aef34" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('9ad1f540-33')+','+('9ad1f540-24')}}" label="商品简介" prop="brief" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><u-input bind:input="__e" vue-id="{{('9ad1f540-34')+','+('9ad1f540-33')}}" type="textarea" placeholder="可选，请输入商品简介" border="{{false}}" custom-style="{{({background:'#f5f5f5',borderRadius:'10rpx',padding:'20rpx'})}}" value="{{productForm.brief}}" data-event-opts="{{[['^input',[['__set_model',['$0','brief','$event',[]],['productForm']]]]]}}" class="data-v-368aef34" bind:__l="__l"></u-input></u-form-item><u-form-item vue-id="{{('9ad1f540-35')+','+('9ad1f540-24')}}" label="商品图片" prop="imgpath" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><view class="product-image-upload data-v-368aef34"><image class="product-image-preview data-v-368aef34" src="{{productForm.imgpath||defaultProductImage}}" mode="aspectFill"></image><view class="product-image-actions data-v-368aef34"><u-button vue-id="{{('9ad1f540-36')+','+('9ad1f540-35')}}" size="mini" type="primary" loading="{{uploadingProductImage}}" disabled="{{uploadingProductImage}}" data-event-opts="{{[['^click',[['handleChooseProductImage']]]]}}" bind:click="__e" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><u-icon vue-id="{{('9ad1f540-37')+','+('9ad1f540-36')}}" name="cloud-upload" size="24" color="#fff" class="data-v-368aef34" bind:__l="__l"></u-icon>上传图片 </u-button><text class="product-image-tip data-v-368aef34">支持 jpg/png，建议 2MB 以内</text></view></view></u-form-item></u-form><view class="admin-popup__actions data-v-368aef34"><u-button vue-id="{{('9ad1f540-38')+','+('9ad1f540-23')}}" type="info" size="default" data-event-opts="{{[['^click',[['e1']]]]}}" bind:click="__e" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}">取消</u-button><u-button vue-id="{{('9ad1f540-39')+','+('9ad1f540-23')}}" type="primary" size="default" data-event-opts="{{[['^click',[['handleSaveProduct']]]]}}" bind:click="__e" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}">确定</u-button></view></view></u-popup><u-popup bind:input="__e" vue-id="9ad1f540-40" mode="bottom" height="60%" border-radius="20" mask-close-able="{{true}}" value="{{showCategoryPicker}}" data-event-opts="{{[['^input',[['__set_model',['','showCategoryPicker','$event',[]]]]]]}}" class="data-v-368aef34" bind:__l="__l" vue-slots="{{['default']}}"><view class="category-picker data-v-368aef34"><view class="category-picker__header data-v-368aef34"><view class="category-picker__title data-v-368aef34">选择分类</view><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="category-picker__close data-v-368aef34" catchtap="__e"><u-icon vue-id="{{('9ad1f540-41')+','+('9ad1f540-40')}}" name="close" size="24" class="data-v-368aef34" bind:__l="__l"></u-icon></view></view><scroll-view class="category-picker__list data-v-368aef34" scroll-y="{{true}}"><block wx:for="{{categoryList}}" wx:for-item="category" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['handleCategorySelect',['$0'],[[['categoryList','id',category.id]]]]]]]}}" class="{{['category-picker__item','data-v-368aef34',(productForm.typeid===category.id)?'category-picker__item--selected':'']}}" catchtap="__e"><text class="category-picker__name data-v-368aef34">{{category.name}}</text><block wx:if="{{productForm.typeid===category.id}}"><u-icon vue-id="{{('9ad1f540-42-'+__i0__)+','+('9ad1f540-40')}}" name="checkmark" color="#EE2F37" size="24" class="data-v-368aef34" bind:__l="__l"></u-icon></block></view></block><block wx:if="{{$root.g3===0}}"><view class="category-picker__empty data-v-368aef34"> 暂无分类 </view></block></scroll-view></view></u-popup><u-action-sheet vue-id="9ad1f540-43" list="{{categoryActionList}}" title="{{selectedCategory?'操作：'+selectedCategory.name:'分类操作'}}" value="{{showCategoryActionMenu}}" data-event-opts="{{[['^click',[['handleCategoryAction']]],['^input',[['__set_model',['','showCategoryActionMenu','$event',[]]]]]]}}" bind:click="__e" bind:input="__e" class="data-v-368aef34" bind:__l="__l"></u-action-sheet></view>